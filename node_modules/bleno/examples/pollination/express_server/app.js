// import mongoose
const mongoose = require('mongoose');
const express = require('express');
const app = express();
const port = 3000

// import schema
const {Question} = require('./models/question_schema')

// default mongoose conn:
const mongoDB = 'mongodb://127.0.0.1/poll_test';
mongoose.connect(mongoDB);


mongoose.Promise = global.Promise;

// default connection
const db = mongoose.connection;


app.get('/getQuestion/:id', function (req, res) {
    let question_id = req.params.id;
    (Question).findOne({_id: question_id},(err,oneQuestion)=>{
        if (err) console.error(err);
        res.send(oneQuestion);
    }) 
});

app.get('/getQuestions', function (req, res) {
    let question_id = req.params.id;
    QuestionSchema.findOne({_id: question_id},(err,oneQuestion)=>{
        if (err) console.error(err);
        res.send(oneQuestion);
    }) 
});


app.listen(port, () => console.log(`Example app listening on port ${port}!`))